(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{104:
/*!*******************************************************************************************!*\
  !*** D:/g工作/zilv/code/defaultmoban/defaultmoban/main.js?{"page":"pages%2Flogin%2Flogin"} ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){t(/*! uni-pages */4);r(t(/*! vue */2));var n=r(t(/*! ./pages/login/login.vue */105));function r(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},105:
/*!************************************************************************!*\
  !*** D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue ***!
  \************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var r=t(/*! ./login.vue?vue&type=template&id=b237504c& */106),a=t(/*! ./login.vue?vue&type=script&lang=js& */108);for(var o in a)"default"!==o&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t(/*! ./login.vue?vue&type=style&index=0&lang=scss& */110);var i,s=t(/*! ../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */8),u=Object(s["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],i);u.options.__file="pages/login/login.vue",n["default"]=u.exports},106:
/*!*******************************************************************************************************!*\
  !*** D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \*******************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var r=t(/*! -!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c& */107);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},107:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return o})),t.d(n,"components",(function(){return r}));var a=function(){var e=this,n=e.$createElement;e._self._c},o=!1,i=[];a._withStripped=!0},108:
/*!*************************************************************************************************!*\
  !*** D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var r=t(/*! -!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js& */109),a=t.n(r);for(var o in r)"default"!==o&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=a.a},109:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t(/*! ./node_modules/@babel/runtime/regenerator */10));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,n,t,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function s(e){o(i,r,a,s,u,"next",e)}function u(e){o(i,r,a,s,u,"throw",e)}s(void 0)}))}}var s={data:function(){return{origin:"",SessionKey:"",OpenId:"",nickName:null,avatarUrl:null,userinfo:{},code:"",isCanUse:e.getStorageSync("isCanUse")||!0}},onLoad:function(e){this.origin="/"+decodeURIComponent(e.url),console.log(this.origin)},methods:{wxGetUserInfo:function(){var n="weixin",t=this;e.getUserInfo({provider:n,success:function(n){console.log(n);n.userInfo.nickName,n.userInfo.avatarUrl;try{e.setStorageSync("isCanUse",!1),t.updateUserInfo()}catch(r){}},fail:function(e){}})},login:function(){var n=this;e.showLoading({title:"登录中..."});var t="weixin";e.login({provider:t,success:function(){var a=i(r.default.mark((function a(o){var s;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(o),s={code:o.code},e.getUserInfo({provider:t,success:function(){var e=i(r.default.mark((function e(a){var o,i,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.userInfo.nickName,a.userInfo.avatarUrl,n.userinfo=a.userInfo,o={rawData:a.rawData,signature:a.signature,encryptedData:a.encryptedData,iv:a.iv},Object.assign(n.userinfo,s,o),i=n.userinfo,console.log(i),e.next=9,n.$api.showLoading();case 9:return e.next=11,n.$api.postData(n.$api.webapi.uniLogin,i);case 11:return u=e.sent,e.next=14,n.$api.hideLoading();case 14:n.$api.reshook(u,"/pages/login/login")&&n.loginSuccess(u,t);case 15:case"end":return e.stop()}}),e)})));function a(n){return e.apply(this,arguments)}return a}()});case 3:case"end":return a.stop()}}),a)})));function o(e){return a.apply(this,arguments)}return o}()})},visitLogin:function(){var e=this;return i(r.default.mark((function n(){var t,a,o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=Date.parse(new Date)+String(parseInt(1e6*Math.random())),console.log(t),a={username:t},n.next=5,e.$api.showLoading();case 5:return n.next=7,e.$api.postData(e.$api.webapi.visitLogin,a);case 7:return o=n.sent,n.next=10,e.$api.hideLoading();case 10:console.log("visit login res is ============="),console.log(o),e.visitLoginSuccess(o);case 13:case"end":return n.stop()}}),n)})))()},gotoPhone:function(){e.navigateTo({url:"/pages/phonelogin/phonelogin"})},visitLoginSuccess:function(n){var t=this;return i(r.default.mark((function a(){var o;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=t,console.log(n.data),e.setStorage({key:"userId",data:n.data.userId}),e.setStorage({key:"nickName",data:"临时游客"}),5==n.data.type&&e.setStorage({key:"userType",data:"游客"}),e.setStorage({key:"token",data:n.data.token,success:function(){var n=i(r.default.mark((function n(){var t,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("set token is = "),console.log(e.getStorageSync("token")),console.log(o.origin),t="/undefined"==o.origin?"/pages/rwlist/rwlist":o.origin,n.next=6,o.$api.getUserinfo();case 6:a=n.sent,a?(console.log(a),e.reLaunch({url:t})):e.showToast({title:"获取用户信息失败",icon:"none",duration:2e3});case 8:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}()});case 6:case"end":return a.stop()}}),a)})))()},loginSuccess:function(n,t){var a=this;return i(r.default.mark((function t(){var o,s,u,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(console.log(a.origin),console.log("loginsuccess"),console.log(n.data),o=["avatarUrl","nickName","isLogin","userId","userType"],s=[n.data.weiChatAuthUser.avatarUrl,n.data.name,!0,n.data.userId,"正式"],u=a,c=0;c<o.length;c++)e.setStorage({key:o[c],data:s[c]});e.setStorage({key:"token",data:n.data.token,success:function(){var n=i(r.default.mark((function n(){var t;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("set token is = "),console.log(e.getStorageSync("token")),n.next=4,u.$api.getUserinfo();case 4:t=n.sent,t?e.reLaunch({url:"/undefined"!==u.origin?u.origin:"/pages/rwlist/rwlist"}):e.showToast({title:"获取用户信息失败",icon:"none",duration:2e3});case 6:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}()});case 8:case"end":return t.stop()}}),t)})))()},updateUserInfo:function(){var n=this;e.request({url:"url",data:{appKey:this.$store.state.appKey,customerId:n.customerId,nickName:n.nickName,headUrl:n.avatarUrl},method:"POST",header:{"content-type":"application/json"},success:function(n){"success"==n.data.state&&e.reLaunch({url:"/pages/index/index"})}})}}};n.default=s}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},110:
/*!**********************************************************************************************************!*\
  !*** D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var r=t(/*! -!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../download/t/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss& */111),a=t.n(r);for(var o in r)"default"!==o&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=a.a},111:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/g工作/zilv/code/defaultmoban/defaultmoban/pages/login/login.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){}},[[104,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map